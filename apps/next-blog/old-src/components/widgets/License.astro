---
import { FaCreativeCommons, FaCreativeCommonsBy } from 'react-icons/fa/index'
import { getFirstAuthorLink } from '../../utils/getFirstAuthorLink'
import type { BlogPost } from '../../utils/types'

interface Props {
  post: BlogPost
}
const { post } = Astro.props
const authors = [...(post.team_members || []), ...(post.blog_authors ?? [])]
---

<div className="">
  <div className="max-w-xl flex flex-col gap-4">
    <h2 className="text-4xl font-bold">License</h2>
    <span className="license">
      <a
        rel="license"
        className="flex gap-2 text-lg text-black dark:text-white"
        href="http://creativecommons.org/licenses/by/4.0/"
      >
        <FaCreativeCommons className="h-8 w-8 dark:text-white text-black" />
        <FaCreativeCommonsBy className="h-8 w-8 text-black dark:text-white" />
      </a>
    </span>
    <p>
      <span
        xmlns:dct="http://purl.org/dc/terms/"
        href="http://purl.org/dc/dcmitype/Text"
        property="dct:title"
        rel="dct:type"
        ><em>{post.title}</em>
      </span> by
      {
        authors.map((author, idx) => (
          <span>
            <a
              xmlns:cc="http://creativecommons.org/ns#"
              property="cc:attributionName"
              rel="cc:attributionURL"
              href={getFirstAuthorLink(author)}
            >
              {`${author.firstName} ${author.lastName}`}
            </a>
            {
              // idx < authors.length - 1 ? ',' : authors.length > 1 ? ' and ' : ''
              // comma separated list of authors, the last one is separated by 'and'
              idx < authors.length - 2 ? ',' : idx === authors.length - 2 ? ' and ' : ''
            }
          </span>
        ))
      }
      is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/"
        >Creative Commons Attribution 4.0 International License.</a
      >
    </p>
  </div>
</div>
